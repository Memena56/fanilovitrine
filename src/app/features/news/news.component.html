<section class="relative isolate overflow-hidden bg-white px-4 py-8 sm:px-6 sm:py-12 lg:px-12 font-sans">
    <div class="max-w-7xl mx-auto flex flex-col lg:grid lg:grid-cols-4 lg:gap-12">
        <!-- Sidebar -->
        <aside class="mb-8 lg:mb-0 lg:col-span-1 lg:sticky lg:top-24 self-start">
        <div class="bg-gradient-to-br from-[#21205a]/80 via-[#36357a]/60 to-[#191846]/80 rounded-2xl shadow-md p-6 border border-white/10 backdrop-blur-md">
            <h2 class="text-xl font-semibold text-white mb-6">Sivana</h2>
            <form class="flex flex-col gap-4" (ngSubmit)="$event.preventDefault()">
            <div *ngFor="let cat of categories" class="flex items-center gap-3">
                <input
                type="checkbox"
                class="form-checkbox text-indigo-600 focus:ring-indigo-400 rounded-md transition"
                [checked]="selectedCategory.includes(cat)"
                (change)="filterByCategory(cat)" />
                <label class="text-white cursor-pointer select-none">{{ cat }}</label>
            </div>
            <button
                type="button"
                (click)="clearFilters()"
                class="mt-2 text-sm text-indigo-200 hover:text-white hover:underline transition rounded px-2 py-1"
            >
            Faf√†na ny sivana
            </button>
            <button
                (click)="goToDashboardOrLogin()"
                class="hidden md:block mt-5 px-4 py-2 bg-indigo-500 text-white rounded-lg font-medium shadow hover:bg-indigo-600 transition w-full text-center"
            >
            Hampiditra vaovao
            </button>
            </form>
        </div>
        </aside>

        <!-- News List -->
        <div class="lg:col-span-3">
        <ng-container *ngIf="newsList && newsList.length > 0; else noNews">
            <div class="grid gap-8 sm:grid-cols-2 xl:grid-cols-3">
            <div *ngFor="let news of newsList; trackBy: trackByNewsId"
                class="bg-white border border-gray-50 rounded-2xl overflow-hidden cursor-pointer shadow transition hover:shadow-xl hover:-translate-y-1 hover:bg-indigo-50/60 duration-400"
                (click)="goToNewsDetail(news.slug)">
                <img [src]="news.photo" alt="{{ news.title }}" class="h-48 w-full object-cover rounded-t-2xl" />
                <div class="p-5">
                <p class="text-xs uppercase text-indigo-500 font-bold mb-1 tracking-wide">{{ news.category?.join(', ') }}</p>
                <h3 class="text-lg font-bold text-gray-900 mb-2">{{ news.title }}</h3>
                <p class="text-sm text-gray-600 line-clamp-3">{{ news.introduction }}</p>
                <p class="text-xs text-gray-400 mt-3">{{ news.date | date: 'dd MMM yyyy' }}</p>
                </div>
            </div>
            </div>
        </ng-container>
        <ng-template #noNews>
            <div class="text-center py-16 text-gray-400 text-lg font-medium">
            Tsy misy vaovao azo aseho amin'izao fotoana izao.
            </div>
        </ng-template>
        <!-- Pagination -->
        <div class="mt-10 flex flex-wrap justify-center items-center gap-4">
            <button class="px-5 py-2 rounded-lg text-sm border border-indigo-500 text-indigo-600 hover:bg-indigo-100 disabled:opacity-40"
                    (click)="prevPage()" [disabled]="currentPage === 1">
            Taloha
            </button>
            <span class="text-sm font-medium text-gray-700 bg-indigo-100 rounded-full px-4 py-1 shadow">
            Pejy {{ currentPage }} / {{ totalPages }}
            </span>
            <button class="px-5 py-2 rounded-lg text-sm border border-indigo-500 text-indigo-600 hover:bg-indigo-100 disabled:opacity-40"
                    (click)="nextPage()" [disabled]="currentPage === totalPages">
            Afara
            </button>
        </div>
        </div>
    </div>
</section>
